## 1. 关键字

ECAMScript中存在关键字和保留字，关键字即已经在语言中有特定用途的字，保留字即还没有投入应用，但是有可能在未来被用作关键字，为了不出现兼容问题，也不允许被用来当做标识符的字

具体的关键字和保留字参考[这里](https://www.runoob.com/js/js-reserved.html)

## 2. 标识符

标识符即变量，函数，属性的名称，标识符的规则如下

* 第一个字符必须是一个字母，下划线或者$
* 其他字符可以是字母，下划线，$或者数字

## 3. 常数

## 4. 运算符

### 4.1 运算符优先级

```
var a = 42
var b = "foo"

a && b // "foo"
a || b // 42
```

上例是因为运算符的规则，||运算符在处理第一个值，若其为真值，则不判断第二个值并且将第一个值作为该运算操作的返回值, 这种现象我们称之为`短路`，即若第一个操作数可以返回结果，则不会对第二个操作数求值。||则相反，第一个哪怕为真值，也要判断第二个值.（但这里只是最简单的两种操作事实上这两个操作符的处理逻辑比我们想象得要复杂得多，下面一个部分将会详细介绍）

```
var a = 42, b
b = (a++, a)

a // 43
b // 43

var a = 42, b
b = a++, a

a // 43
b // 42
```

上例的原因是，运算符`,`的优先级比`=`低

> 记住，用`,`来连接一系列语句的时候，它的优先级最低

* && 大于 ||
* || 大于 ? :
* 计算复杂表达式时，执行顺序永远是从左往右，但是根据运算符的左关联和有关联可以决定组合的顺序
* 在判断一个语句的执行顺序时，我们首先判断关联顺序，然后再看优先级

&&和||是左关联,?:和=是右关联

```
a ? b : c ? d : e
=> a ? b : (c ? d : e) // ?: 是右关联

a = b = c = 42
=> a = (b = (c = 42)) // = 赋值操作符也是右关联

a && b || c ? c || b ? a : c && b : a
=> (a && b || c) ? (c || b ? a : c) : a // 先看?:的右关联
=> ((a && b) || c) ? ((c || b) ? a : c) : a // 再看&&,||,?:的优先度
```

### 4.2 一元操作符

#### 递增和递减操作符

++，--，分为前置和后置，在涉及到类型转换时它的优先级为数值类型。比如+"123"，先将"123"转化为123，再进行数值的加减。对于"abc"则返回NaN，对于对象，则尝试调用其[Primitive]私有字段

#### 一元加和减

通过在直接量/变量前加入加号和减号实际会内部调用Number()方法进行强制类型转换，依旧是数值类型

```
+"123" // 123
+"abc" // NaN
```

####  void操作符

该操作符很简单，输入任何操作数，返回undefined值

```
void 0 // undefined
void 0 === undefined
```

#### delete操作符

* 该操作符的真实含义是删除某个对象的属性，也就是说它只有在用于删除全局属性或者删除某个对象的属性时才起作用
* delete操作符在删除直接量时，会直接返回true，表示没有错误
* 如果被操作的对象不存在，则还是返回true
* delete null返回true，delete undefined返回false，是因为undefined被认为是一个特殊的全局变量，但是无法被delete，所以就会返回false，比如我们delete void 0 就会返回true

#### 位操作符

:::tip
js中所有的数值都以IEEE64位的格式存储，但是和数值有关的操作并不直接操作64位的值，而是先将64位的值转换成32位的整数，然后执行操作，最后将结果转换为64位，对于开发人员来说，实际和只存在32位整数一样
:::

!> 默认情况下，ECMAScript中所有整数都是有符号整数，但是也存在无符号整数

对于有符号的整数，32位中的前31位用于表示整数的值，第32位表示正负，0表示整数，1表示负数。表示负数用的方式叫`二进制补码`，具体步骤如下

* 求该数绝对值的二进制码
* 求二进制反码，得到的二进制反码加1

我们以求-18为例

* 首先得到18的二进制码 0000 0000 0000 0000 0000 0000 0001 0010
* 求二进制反码 1111 1111 1111 1111 1111 1111 1110 1101
* 二进制反码加一 1111 1111 1111 1111 1111 1111 1110 1110

对于其他类型的数据，老规矩，还是会先用Number方法格式化一遍

> ~ 按位非

根据负数的定义，按位非应该等于一个数的负值减一

```
~12 // -13
~-12 // 11
```

> & 按位与（全是1）

```
25 & 3 // 11001 & 11 => 1
```

> | 按位或（有一个是1）

```
25 | 3 // 11001 & 11 => 11011 => 27
```

> ^ 按位异或 （只有一个是1）

```
25 ^ 3 // 11001 & 11 => 11010 => 26
```

> << 左移， >> 右移

左移的过程出现了空白，用0来填充，右移的过程出现了空白，用符号位来填充，最终的结果表现为：左移数值翻倍，右移数值缩小。此处的左移/右移不会影响符号位,并且右移是不会使整数变成小数的。

```
2<<2 // 10 => 1000(用0填充)
2>>1 // 10 => 01(用符号位填充)
```

> <<< 无符号左移，>>> 无符号右移

对于正数，该操作和左移/右移无异，但对于负数，因为它会移动符号位，并且右移并不是以符号位填充，而是0填充，所以就会出现奇怪的结果

```
-64 >>> 5 // 134217726
```

### 4.3 布尔操作符

#### ! 逻辑非

会进行强制类型转换

#### && 逻辑与， || 逻辑非

它们两个判断的本质就是首先看第一个操作数是否为真值，若是则判断第二个操作数/返回第一个操作数，若不是则返回第一个操作数/判断第二个操作数，都是`短路操作`

### 4.4 乘性操作符

ECMAScript定了三种乘性操作符，乘法，除法和求模，基本用途和传统的数学定义类似，但是操作数为废树脂的情况下会执行自动的类型转换。

####  乘法

乘法特殊情况有

* NaN和任何值进行运算结果都是NaN
* Infinity * 0 // NaN
* Infinity * (非0数值) // Infinity/-Infinity
* 数值类型之外的值会进行Number()强制类型转换

#### 除法

对于除法，基本规则同上，特殊如下

* 0 / 0 // NaN
* (非0数值) / 0 // Infinity/-Infinity

#### 求模

对于求模，基本规则同上，特殊如下

* Infinity % (任意数值,包括0,非0数值，NaN，Infinity) // NaN
* (任意数值) % 0 // NaN

### 4.5 加性操作符

#### + 加法

* 对于数值类型
    * Infinity + -Infinity // NaN
    * +0 + -0 // +0
* 字符串类型或者通过String方法可以转化为字符串类型的值，拼接两个字符串

```
1 + "2" // "12"
1 + {} // "1[object Object]"
```

#### - 减法

* Infinity - Infinity // NaN
* +0 - +0 // +0
* -0 - -0 // +0 (规律就是尽可能往正的上凑)

### 4.6 关系操作符

* 如果两个操作数都是数值，直接比较
* 如果`两个操作数`都是字符串，则比较字符串对应的编码
* 其他情况都强制类型转换为数值类型再比较
* 如果一个操作数是NaN或者被转化为了NaN，则返回false，因为NaN没有办法比较

```
Infinity <= Infinity // true
"23" < "3" // true
"a" < 3 // NaN < 3 => false
{} < 3 // 这个比较有争议
```

上述最后一个例子存在争议，node环境下是false，很好理解{}调用ToPrimitive操作返回的基本类型是[object Object]，但是不能正常转换为数值类型，于是返回值为NaN,Number({})也是NaN，NaN < 3 自然是false，但是chrome下回抛出未知语法错误，个人猜测这里可能是浏览器自行的限制，和语言标准无关

### 4.7 相等操作符

#### 相等和不相等

先转换类型，在进行比较

* 如果有一个操作符是布尔值，则在比较相等性之前将其转换为数值
* 如果一个是字符串，一个是数值，则将字符串转换为数值
* 如果一个是对象，另外一个不是，则调用对象的valueOf
* null和undefined不能转换


| 表达式             | 值     |
|-----------------|-------|
| null==undefined | true  |
| “NaN”==NaN      | true  |
| NaN==NaN        | false |
| NaN!=NaN        | true  |
| false ==0       | true  |
| null == 0       | false |
| “5”==5          | true  |

### 4.8 条件操作符

?:

### 4.9 赋值操作符

=

### 4.10 逗号操作符

```
var a = (1,2,3) // 3
```
