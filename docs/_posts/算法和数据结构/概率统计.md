![](https://static001.geekbang.org/resource/image/0d/0a/0dd3a82c32db9385c85d039448b7570a.jpg)

## 1. 定义

如果你是一名手机应用开发工程师，让你实现一个简单的垃圾短信过滤功能和骚扰电话拦截功能，该用什么样的数据结构和算法实现呢？

## 1.1 基于黑名单

我们可以维护一个黑名单，如果黑名单的电话号码不多，我们可以用散列表，二叉树等动态数据结构来存储。如果名单多了，再用这些方法就不合适了。布隆过滤器最大的特点就是比较省存储空间，所以用它来解决这个问题再合适不过了

当然，我们也可以把这个功能交给服务器，这样就不占用手机的资源了，但是网络延迟始终是个问题，而且这样的话这种功能就只能联网才能进行

## 1.2 基于规则的过滤器

我们还可以通过短信的内容，来判断某条短信是否是垃圾短信。我们预先设定一些规则，如果某条短信符合这些规则，我们就可以判定它是垃圾短信。

当然我们可以综合多条规则以防止误判

在规则里，我们需要找到哪些是特殊单词，我们可以基于概率统计的方法，借助计算机强大的计算能力，找到那些单词经常出现在垃圾短信中，不过这个方法要求我们有大量的数据样本

## 1.3 基于概率统计的过滤器

基于规则的过滤器，有一定的局限性，一方面，这些规则太过主观，另一方面垃圾短信发送者可能会针对规则，精心设计短信，来绕过这些规则的阻拦。我们来看一下基于概率统计的过滤方式

实际上就是贝叶斯算法，对于短信这个业务来说，我们首先通过分词算法，将其分割成n个单词

![](https://static001.geekbang.org/resource/image/b8/e7/b8f76a5fd26f785055b78ffe08ccfbe7.jpg)

得到这样的概率计算公式，但是很多时候，我们的数据样本是有限的，我们有可能根本不会出现这几个单词同时出现的情况，我们可以用朴素贝叶斯公式，将其分解

![](https://static001.geekbang.org/resource/image/39/ae/39c57b1a8a008e50a9f6cb8b7b9c9bae.jpg)

![](https://static001.geekbang.org/resource/image/6c/f2/6c261a3f5312c515cf348cc59a5e73f2.jpg)

## 2. 总结

今天，我们讲了基于黑名单，规则，概率统计三种垃圾短信的过滤方法，实际上，这三种方法还可以用用到很多类似的领域.黑名单法可能会误判，我们可以基于三种方法，最后才判定是否为垃圾短信。在实际的工程中，我们可以结合具体的场景，不断去调整侧列
