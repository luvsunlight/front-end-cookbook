!> 当机器处于不安全环境时，切记不能通过http cookie存储和传输敏感信息

## 会话劫持和xss

在web应用中，cookie常被用来标记用户或者授权会话。因此，如果有web应用的cookie被窃取，可能导致授权用户的会话遭到攻击。常用的窃取cookie的方法有利于社会工程学攻击和利用应用程序漏洞进行xss攻击

### 1. xss的定义

跨站脚本攻击（XSS），恶意攻击者往web页面中插入恶意js代码，当用户浏览该页面时，嵌入其中的js代码会被执行，从而达到恶意攻击用户的目的

### 2. XSS的原理

* 攻击者对含有漏洞的服务器发起XSS攻击（注入js代码）
* 诱使受害者打开攻击的服务器url
* 受害者在web浏览器中打开url，恶意脚本执行

### 3. XSS的攻击方式

#### 3.1 反射型

发出请求时，xss代码出现在url中，作为输入提交到服务器端，服务器端解析后响应，xss随着响应内容一起返回给浏览器，最后浏览器解析执行xss代码.这个过程

#### 3.2 存储型

存储型xss和反射型的xss差别就在于，存储型的xss提交的代码会存储在服务器端（数据库，内存，文件系统等），下次请求页面时不用再提交xss代码

### 4. XSS的防御措施

* 编码，对用户输入的数据进行html entity编码

![](https://img-blog.csdn.net/20170418160547231?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZ2FueWluZ3hpZTEyMzQ1Ng==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)

* 过滤，移除用户上传的dom属性，如onerror，移除用户上传的style节点，script节点，iframe节点等
* 校正，避免直接对html entity编码，使用DOMparse转换，校正不配对的dom标签

### 5. xss的常见表现形式

img标签是自动触发而受到攻击的，p标签是引诱出发而遭到攻击的，而iframe是广告植入攻击的

## 跨站请求伪造（CSRF）

## 内容安全策略（CSP）

内容安全策略（CSP,Content Security Policy）是一个附加的安全层，用于帮助检测和缓解某些类型的攻击，包括跨站脚本

## Refer

* [Web安全之XSS攻防](https://blog.csdn.net/ganyingxie123456/article/details/70230486)

